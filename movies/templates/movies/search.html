{% extends 'base.html' %}

{% block content %}
<input onkeypress="if(event.keyCode==13){searchinput();}" type="text" id="keyword" name="keyword">
<button id="search">검색</button>
<h1>{{ keyword }} 검색결과</h1>
<div class="container row">
  {% for response in responses.results %}
  <div class="card mx-3 my-3" style="width: 18rem;">
    <img src='https://www.themoviedb.org/t/p/w600_and_h900_bestv2{{response.poster_path}}' class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">{{response.title}}</h5>
      <p class="card-text">평점 : {{response.vote_average}} / 10</p>
      <a href="{% url 'movies:search_detail' response.id %}" class="btn btn-primary">DETAIL</a>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock content %}


{% block script %}
  <script>
    const searchbtn = document.querySelector('#search')
    searchbtn.addEventListener('click', function(){
      if (keyword.value.length < 2){
        alert('두 글자 이상 입력해주세요.')
      } else {
        window.location.href = `http://127.0.0.1:8000/movies/search/index/${keyword.value}`
      }
    })

    function searchinput(){
      if (keyword.value.length < 2){
        alert('두 글자 이상 입력해주세요.')
      } else {
        window.location.href = `http://127.0.0.1:8000/movies/search/index/${keyword.value}`
      }
    }
  </script>
{% endblock script %}